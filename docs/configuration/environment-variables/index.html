<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://dekart.xyz/main.9d8edcf69c3ec040349935d8478f2196f316c62413798261dc4c5be92b77e35ce8235f090802df2e2aade0b54f28c3b2adcae10b0b4727849356db99ed57201d.css integrity="sha512-nY7c9pw+wEA0mTXYR48hlvMWxiQTeYJh3Exb6St341zoI18JCALfLiqt4LVPKMOyrcrhCwtHJ4STVtuZ7VcgHQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Environment Variables - Dekart</title><meta name=description content="Environment Variables"><link rel=canonical href=https://dekart.xyz/docs/configuration/environment-variables/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dekart.xyz/dekart-social-preview-0-18.png"><meta name=twitter:title content="Environment Variables"><meta name=twitter:description content="Environment Variables"><meta name=twitter:creator content="@delfrrr"><meta property="og:title" content="Environment Variables"><meta property="og:description" content="Environment Variables"><meta property="og:type" content="article"><meta property="og:url" content="https://dekart.xyz/docs/configuration/environment-variables/"><meta property="og:image" content="https://dekart.xyz/dekart-social-preview-0-18.png"><meta property="article:published_time" content="2021-02-22T07:48:05+01:00"><meta property="article:modified_time" content="2026-01-30T07:59:19+01:00"><meta property="og:site_name" content="Dekart"><meta property="og:locale" content="en_US"><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://dekart.xyz/apple-icon.png><link rel=icon type=image/png sizes=32x32 href=https://dekart.xyz/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://dekart.xyz/favicon-16x16.png><link rel=manifest href=https://dekart.xyz/site.webmanifest><script defer data-domain=dekart.xyz src=https://plausible.io/js/script.tagged-events.js></script></head><body><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 mr-auto" href=https://dekart.xyz/>Dekart</a><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=http://github.com/dekart-xyz/dekart><svg width="24" height="24" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M512 0C229.12.0.0 229.12.0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32.0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8.0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68.0.0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28s87.04 5.76 128 17.28c97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6.0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72.0 68.48-.64 123.52-.64 140.8.0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88.0 512 0z" fill="#1b1f23"/></svg><span class="ml-2 sr-only">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><div id=suggestions class="shadow bg-white rounded"></div><a class="nav-link text-nowrap" href=https://dekart.xyz/cloud>Pricing</a></li><li class=nav-item><div id=suggestions class="shadow bg-white rounded"></div><a class="nav-link text-nowrap" href=https://dekart.xyz/self-hosted/>Self-Hosting</a></li><li class=nav-item><div id=suggestions class="shadow bg-white rounded"></div><a class="nav-link text-nowrap" href=https://dekart.xyz/docs/about/overture-maps-examples/>Examples</a></li><li class=nav-item><div id=suggestions class="shadow bg-white rounded"></div><a class="nav-link text-nowrap" href=https://dekart.xyz/data-sales-demos/>Data Providers</a></li><li class=nav-item><div id=suggestions class="shadow bg-white rounded"></div><a class="nav-link text-nowrap" href=https://slack.dekart.xyz>üõü Ask in Slack</a></li></ul><div class="break order-6 d-md-none"></div><ul class="navbar-nav navbar-login flex-grow-1 order-7 order-md-3 justify-content-end"><li class=nav-item><a class="nav-link text-nowrap" href="https://cloud.dekart.xyz/?ref=login" target=_blank rel="noopener noreferrer">Login</a></li><li class=nav-item><a class="btn btn-primary" href="https://cloud.dekart.xyz/?ref=start-now" role=button>Start Now</a></li></ul></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Map Examples</h3><ul class=list-unstyled><li><a class=docs-link href=https://dekart.xyz/docs/about/overture-maps-examples/>BigQuery Overture Maps</a></li><li><a class=docs-link href=https://dekart.xyz/docs/about/kepler-gl-map-examples/>BigQuery Public Datasets</a></li><li><a class=docs-link href=https://dekart.xyz/docs/about/ev-charging-analytics/>EV Charging Analytics</a></li><li><a class=docs-link href=https://dekart.xyz/docs/about/map-templates/>Map Templates</a></li><li><a class=docs-link href=https://dekart.xyz/docs/about/snowflake-kepler-gl-examples/>Snowflake Free Datasets</a></li></ul><h3>Usage</h3><ul class=list-unstyled><li><a class=docs-link href=https://dekart.xyz/docs/usage/choose-bigquery-connection-method/>BigQuery Connection Guide</a></li><li><a class=docs-link href=https://dekart.xyz/docs/usage/google-cloud-grant-scopes-faq/>Google Cloud Grant Scopes</a></li><li><a class=docs-link href=https://dekart.xyz/docs/usage/query-parameters/>Query Parameters</a></li><li><a class=docs-link href=https://dekart.xyz/docs/usage/cloud-security-faq/>Security Considerations</a></li><li><a class=docs-link href=https://dekart.xyz/docs/usage/snowflake-private-key/>Snowflake Private Key</a></li><li><a class=docs-link href=https://dekart.xyz/docs/usage/wherobots-sql-tutorial/>Wherobots SQL Tutorial</a></li></ul><h3>Self-Hosting</h3><ul class=list-unstyled><li><a class=docs-link href=https://dekart.xyz/docs/self-hosting/docker/>Docker</a></li><li><a class=docs-link href=https://dekart.xyz/docs/self-hosting/docker-compose/>Docker Compose</a></li><li><a class=docs-link href=https://dekart.xyz/docs/self-hosting/upgrade/>Upgrade to new version</a></li><li><a class="docs-link active" href=https://dekart.xyz/docs/configuration/environment-variables/>Environment Variables</a></li></ul><h3>About</h3><ul class=list-unstyled><li><a class=docs-link href=https://dekart.xyz/docs/about/playground/>BigQuery Playground</a></li><li><a class=docs-link href=https://dekart.xyz/docs/about/screencast/>Dekart Screencast</a></li></ul><h3>Contributing</h3><ul class=list-unstyled><li><a class=docs-link href=https://dekart.xyz/docs/contributing/architecture-overview/>Architecture</a></li><li><a class=docs-link href=https://dekart.xyz/docs/contributing/build-from-source/>Build from Source</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#main-configuration>Main configuration</a></li><li><a href=#data-encryption>Data Encryption</a></li><li><a href=#aws>AWS</a></li><li><a href=#aws-athena>AWS Athena</a></li><li><a href=#google-cloud>Google Cloud</a></li><li><a href=#bigquery>BigQuery</a></li><li><a href=#snowflake>Snowflake</a><ul><li><a href=#configuring-snowflake-private-key-authentication>Configuring Snowflake Private Key Authentication</a></li></ul></li><li><a href=#postgres-as-a-data-source>Postgres (as a data source)</a></li><li><a href=#clickhouse>ClickHouse</a></li><li><a href=#file-upload>File upload</a></li><li><a href=#-user-authorization-via-google-oauth-20-flow>üëë User authorization via Google OAuth 2.0 flow</a></li><li><a href=#-user-authorization-via-google-iap>üëë User authorization via Google IAP</a></li><li><a href=#-user-authorization-via-amazon-load-balancer>üëë User authorization via Amazon Load Balancer</a></li><li><a href=#-workspaces>üëë Workspaces</a></li><li><a href=#user-experience>User Experience</a></li><li><a href=#development-specific>Development specific</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Environment Variables</h1><p class=lead></p><div class="dekart-cta-banner p-3 mb-3"><div class="row justify-content-between align-items-center"><div class="col-md-10 text-sm-center text-md-left">Save time. Get ready-to-use configs for <b>AWS</b> and <b>Google Cloud</b></div><div class="col-md-6 text-md-right"><a class="btn btn-outline-dark" href="https://mailchi.mp/team/request-self-hosting-documentation?ref=deployment-templates" role=button>Request Access</a></div></div></div><h2 id=main-configuration>Main configuration<a href=#main-configuration class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_MAPBOX_TOKEN</code></td><td><a href=https://docs.mapbox.com/help/how-mapbox-works/access-tokens/>Mapbox Token</a> to show a map</td></tr><tr><td><code>DEKART_POSTGRES_DB</code></td><td>Database name. Dekart needs Postgres Database to store query meta information. Alternatively SQLite can be used, see bellow.<br><em>Example</em>: <code>dekart</code></td></tr><tr><td><code>DEKART_POSTGRES_HOST</code></td><td><em>Example</em>: <code>localhost</code></td></tr><tr><td><code>DEKART_POSTGRES_PORT</code></td><td><em>Example</em>: <code>5432</code></td></tr><tr><td><code>DEKART_POSTGRES_USER</code></td><td><em>Example</em>: <code>postgres</code></td></tr><tr><td><code>DEKART_POSTGRES_PASSWORD</code></td><td><em>Example</em>: <code>******</code></td></tr><tr><td><code>DEKART_PORT</code></td><td><em>Example</em>: <code>8080</code></td></tr><tr><td><code>DEKART_POSTGRES_URL</code><br><small class="badge badge-info">version >= 0.13</small></td><td>Alternatively to specify <code>DEKART_POSTGRES_DB</code>, <code>DEKART_POSTGRES_HOST</code>, <code>DEKART_POSTGRES_PORT</code>, <code>DEKART_POSTGRES_USER</code>, <code>DEKART_POSTGRES_PASSWORD</code>, configure PostgreSQL by passing the connection string. If both specified <code>DEKART_POSTGRES_URL</code> is used.<br><em>Example</em>: <code>postgres://user:pass@hostname:5432/dekart?sslmode=verify-full</code></td></tr><tr><td><code>DEKART_DATASOURCE=BQ</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Which datasource to use:<br>Values<ul><li><code>BQ</code> BigQuery, default</li><li><code>ATHENA</code> AWS Athena</li><li><code>SNOWFLAKE</code> Snowflake <small class="badge badge-info">version >= 0.12</small></li><li><code>PG</code> Postgres <small class="badge badge-info">version >= 0.18</small></li><li><code>USER</code> Users can configure connections in UX <a href=/self-hosted/><small class="badge badge-primary">premium >= 0.17.2</small></a></li><li><code>CH</code> ClickHouse <small class="badge badge-info">version >= 0.18</small></li></ul></td></tr><tr><td><code>DEKART_STORAGE=GCS</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Which storage backend to use for storing queries and query results<br>Values<ul><li><code>GCS</code> Google Cloud Storage, default, works only with BigQuery data source</li><li><code>S3</code> AWS S3, works with BigQuery and AWS Athena</li><li><code>SNOWFLAKE</code> Queries will be cached in Snowflake query result cache. Works only with Snowflake data source. <small class="badge badge-info">version >= 0.17</small></li><li><code>USER</code> Users can configure connections in UX <a href=/self-hosted/><small class="badge badge-primary">premium >= 0.18</small></a></li></ul></td></tr><tr><td><code>DEKART_CLOUD_STORAGE_BUCKET</code></td><td>Google Cloud Storage or AWS S3 bucket name where Dekart Query results will be stored.<br><em>Example</em>: <code>dekart-bucket</code><br><br>If value is empty, users will be able to define storage bucket via UI. Supported datasource <code>DEKART_DATASOURCE</code>:<ul><li><code>BQ</code> BigQuery from <small class="badge badge-info">version >= 0.15</small></li></ul></td></tr><tr><td><code>DEKART_CORS_ORIGIN=</code><br><small class="badge badge-info">version >= 0.10</small></td><td>CORS Origin to be allowed by Dekart backend and set in <code>Access-Control-Allow-Origin</code> header. If not set or set incorrectly, warning will appear in logs. If set incorrectly.<br><em>Example</em>: <code>https://dekart.example.com</code></td></tr><tr><td><code>DEKART_SQLITE_DB_PATH=</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.17.2</small></a></td><td>Dekart will use SQLite database instead of Postgres to store query meta information.<br><em>Example</em>: <code>./dekart.db</code></td></tr><tr><td><code>DEKART_STREAM_TIMEOUT</code><br><small class="badge badge-info">version >= 0.18</small></td><td>Timeout in seconds for streaming backend updates. Default value is 50 seconds. Useful when your Gateway has a shorter timeout and you see Gateway Timeout errors.<br><em>Example</em>: <code>50</code></td></tr></tbody></table><h2 id=data-encryption>Data Encryption<a href=#data-encryption class=anchor aria-hidden=true>#</a></h2><p><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.18</small></a></p><p>Dekart supports data encryption at rest for storing credentials. Required for configuring Snowflake and BigQuery JSON Key via UX. To enable data encryption, set the following environment variables:</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_DATA_ENCRYPTION_KEY</code></td><td>Google Secret Manager key to encrypt sensitive data.<br><em>Example</em>: <code>projects/121212121212/secrets/dekart-data-encoding-key/versions/1</code></td></tr></tbody></table><p>Steps to Generate & Set the Key:</p><ol><li><p>Generate a Secure 256‚ÄêBit Key
Use a command like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl rand -base64 <span class=m>32</span>
</span></span></code></pre></div><p>This produces a base64‚Äêencoded, 32‚Äêbyte key.</p></li><li><p>Add key to Google Secret Manager</p></li><li><p>Set the Environment Variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>DEKART_DATA_ENCRYPTION_KEY</span><span class=o>=</span>projects/121212121212/secrets/dekart-data-encoding-key/versions/1
</span></span></code></pre></div></li></ol><h2 id=aws>AWS<a href=#aws class=anchor aria-hidden=true>#</a></h2><p>Dekart support started AWS SDK environment variables. Required to query AWS Athena and use AWS S3.</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>AWS_REGION</code><br><small class="badge badge-info">version >= 0.8</small></td><td>The AWS SDK compatible environment variable that specifies the AWS Region to send the request to</td></tr><tr><td><code>AWS_ACCESS_KEY_ID</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Specifies an AWS access key associated with an IAM user or role.</td></tr><tr><td><code>AWS_SECRET_ACCESS_KEY</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Specifies the secret key associated with the access key. This is essentially the &ldquo;password&rdquo; for the access key.</td></tr></tbody></table><h2 id=aws-athena>AWS Athena<a href=#aws-athena class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_ATHENA_CATALOG</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Data source (group of databases) for AWS Athena to reference when executing queries. Default value is usually <code>AwsDataCatalog</code>.<br><em>Example</em>: <code>my-athena-catalog</code></td></tr><tr><td><code>DEKART_ATHENA_S3_OUTPUT_LOCATION</code> and then copied to <code>DEKART_CLOUD_STORAGE_BUCKET</code>.<br><em>Example</em>: <code>athena-results</code></td><td></td></tr><tr><td><code>DEKART_ATHENA_S3_OUTPUT_LOCATION</code><br><small class="badge badge-info">version >= 0.8</small></td><td>Amazon S3 query result location required by Athena SDK. This is different from <code>DEKART_CLOUD_STORAGE_BUCKET</code>. First query results are stored in <code>DEKART_ATHENA_S3_OUTPUT_LOCATION</code> and then copied to <code>DEKART_CLOUD_STORAGE_BUCKET</code>.<br><em>Example</em>: <code>athena-results</code></td></tr><tr><td><code>DEKART_ATHENA_WORKGROUP</code><br><small class="badge badge-info">version >= 0.13</small></td><td>AWS Athena workgroup to use when executing Athena queries. If not specified, the default <code>primary</code> workgroup will be used.<br><em>Example</em>: <code>my-athena-workgroup</code></td></tr></tbody></table><h2 id=google-cloud>Google Cloud<a href=#google-cloud class=anchor aria-hidden=true>#</a></h2><p>Required to query BigQuery and use Cloud Storage</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>GOOGLE_APPLICATION_CREDENTIALS</code></td><td>Credentials for <a href=https://cloud.google.com/docs/authentication/getting-started>Google Cloud API</a><br><em>Example</em>: <code>/.../service-account-123456.json</code></td></tr></tbody></table><h2 id=bigquery>BigQuery<a href=#bigquery class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_BIGQUERY_PROJECT_ID</code></td><td>Unique identifier for your Google Cloud project with BigQuery API Enabled.<br><em>Example</em>: <code>my-project</code><br><br><small class="badge badge-info">version >= 0.15</small> If value is empty, users will be able to define project ID via UI.</td></tr><tr><td><code>DEKART_BIGQUERY_MAX_BYTES_BILLED</code><br><small class="badge badge-info">version >= 0.7</small></td><td>Sets <code>maximumBytesBilled</code> in BigQuery Job Configuration to implement <a href=https://cloud.google.com/bigquery/docs/best-practices-costs#limit_query_costs_by_restricting_the_number_of_bytes_billed>Best Practices for Controlling Query Cost</a>.<br>If not set warning message will appear in logs.</td></tr><tr><td><code>DEKART_GCP_EXTRA_OAUTH_SCOPES</code><br><small class="badge badge-info">version >= 0.14</small><br>OAuth token support from <small class="badge badge-info">version >= 0.18</small></td><td>Set additional scopes for the GCP OAuth token when connecting to BigQuery.<br>The value is interpreted as a comma-delimited list.<br>E.g., in order to query a BigQuery table backed by a Google Sheet in Google Drive, the value needs to be set to <code>https://www.googleapis.com/auth/drive</code>.</td></tr></tbody></table><h2 id=snowflake>Snowflake<a href=#snowflake class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_SNOWFLAKE_ACCOUNT_ID</code><br><small class="badge badge-info">version >= 0.12</small></td><td><a target=_blank href=https://docs.snowflake.com/en/user-guide/admin-account-identifier#using-an-account-name-as-an-identifier>Snowflake Account Identifier</a><br><em>Example</em>: <code>orgname-account_name</code></td></tr><tr><td><code>DEKART_SNOWFLAKE_USER</code><br><small class="badge badge-info">version >= 0.12</small></td><td>Snowflake user with default warehouse configured<br><em>Example</em>: <code>example_user</code></td></tr><tr><td><code>DEKART_SNOWFLAKE_PASSWORD</code><br><small class="badge badge-info">version >= 0.12</small></td><td>Snowflake user password<br><em>Example</em>: <code>******</code></td></tr><tr><td><code>DEKART_SNOWFLAKE_PRIVATE_KEY</code><br><small class="badge badge-info">version >= 0.18.4</small></td><td>The private key required for authenticating with Snowflake using the JWT (JSON Web Token) authentication method. This key must be in PKCS#8 format and base64-encoded.<br><em>Example</em>: <code>MIIEv...</code></td></tr><tr><td><code>DEKART_SNOWFLAKE_STAGE</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.17.2</small><br><small class="badge badge-info">version >= 0.18.1</small></td><td>Persist Dekart application state on Snowflake stage. Work with <code>DEKART_SQLITE_DB_PATH</code><br><em>Example</em>: <code>app_public.app_state_stage</code></td></tr><tr><td><code>DEKART_REQUIRE_SNOWFLAKE_CONTEXT=</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.17.2</small></a><br><small class="badge badge-info">version >= 0.18.1</small></td><td>Authorize user using <code>Sf-Context-Current-User</code> header. Used in Snowpark environment.<br><em>Example</em>: <code>1</code></td></tr></tbody></table><h3 id=configuring-snowflake-private-key-authentication>Configuring Snowflake Private Key Authentication<a href=#configuring-snowflake-private-key-authentication class=anchor aria-hidden=true>#</a></h3><h4 id=step-1-generate-a-key-pair>Step 1: Generate a Key Pair<a href=#step-1-generate-a-key-pair class=anchor aria-hidden=true>#</a></h4><ul><li><strong>Generate a Private Key</strong>: Use OpenSSL to generate a private key in PKCS#8 format.<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl genrsa <span class=m>2048</span> <span class=p>|</span> openssl pkcs8 -topk8 -inform PEM -out rsa_key.p8 -nocrypt
</span></span></code></pre></div></li><li><strong>Generate a Public Key</strong>: Extract the public key from the private key.<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl rsa -in rsa_key.p8 -pubout -out rsa_key.pub
</span></span></code></pre></div></li></ul><h4 id=step-2-assign-the-public-key-to-a-snowflake-user>Step 2: Assign the Public Key to a Snowflake User<a href=#step-2-assign-the-public-key-to-a-snowflake-user class=anchor aria-hidden=true>#</a></h4><ul><li>Log into Snowflake with a user that has the necessary permissions.</li><li>Assign the public key to the user using the following SQL command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>example_user</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>RSA_PUBLIC_KEY</span><span class=o>=</span><span class=s1>&#39;MIIBIj...&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li></ul><h4 id=step-3-set-the-environment-variable>Step 3: Set the Environment Variable<a href=#step-3-set-the-environment-variable class=anchor aria-hidden=true>#</a></h4><ul><li>Set the <code>DEKART_SNOWFLAKE_PRIVATE_KEY</code> environment variable with the base64-encoded private key.</li><li>The private key must be base64-encoded without the <code>-----BEGIN PRIVATE KEY-----</code> and <code>-----END PRIVATE KEY-----</code> markers.</li><li>Remove all newlines from the base64-encoded string.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat rsa_key.p8 <span class=p>|</span> sed <span class=s1>&#39;/-----BEGIN PRIVATE KEY-----/d&#39;</span> <span class=p>|</span> sed <span class=s1>&#39;/-----END PRIVATE KEY-----/d&#39;</span> <span class=p>|</span> tr -d <span class=s1>&#39;\n&#39;</span>
</span></span></code></pre></div><h2 id=postgres-as-a-data-source>Postgres (as a data source)<a href=#postgres-as-a-data-source class=anchor aria-hidden=true>#</a></h2><p>Postgres can be used as a data source for Dekart. Do not confuse with Dekart&rsquo;s Postgres database, which is used to store query meta information.</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_POSTGRES_DATASOURCE_CONNECTION</code><br><small class="badge badge-info">version >= 0.16</small></td><td>Postgres DB to be used as data source<br><em>Example</em>: <code>postgres://user:password@host:port/db</code></td></tr></tbody></table><h2 id=clickhouse>ClickHouse<a href=#clickhouse class=anchor aria-hidden=true>#</a></h2><p><small class="badge badge-info">version >= 0.18</small></p><p>ClickHouse can be used as a data source for Dekart.</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_CLICKHOUSE_DATA_CONNECTION</code><br><small class="badge badge-info">version >= 0.18</small></td><td>ClickHouse connection string in DSN format.<br><em>Example</em>: <code>clickhouse://user:password@host:port/database</code></td></tr><tr><td><code>DEKART_CLICKHOUSE_S3_OUTPUT_LOCATION</code><br><small class="badge badge-info">version >= 0.18</small></td><td>S3 bucket path where query results are stored.<br><em>Example</em>: <code>bucket-name/optional-prefix</code></td></tr></tbody></table><h2 id=file-upload>File upload<a href=#file-upload class=anchor aria-hidden=true>#</a></h2><p>Starting from version 0.10 Dekart supports file upload. File upload is disabled by default. Once uploaded files are stored in the same storage as query results. Both AWS S3 and Google Cloud Storage are supported. The recommended max file size is 100MB.</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_ALLOW_FILE_UPLOAD</code><br><small class="badge badge-info">version >= 0.10</small></td><td>Enable file upload<br><em>Example value</em>: <code>1</code></td></tr></tbody></table><h2 id=-user-authorization-via-google-oauth-20-flow>üëë User authorization via Google OAuth 2.0 flow<a href=#-user-authorization-via-google-oauth-20-flow class=anchor aria-hidden=true>#</a></h2><div class="dekart-cta-banner-premium p-3 mb-3" style=zgotmplz><div class="row justify-content-between align-items-center"><div class="col-md-10 text-sm-center text-md-left">Dekart Premium feature</div><div class="col-md-6 text-md-right"><a class="btn btn-outline-dark" href=/self-hosted role=button>View Plans</a></div></div></div><p>Dekart can authorize users via Google OAuth 2.0 and use users&rsquo; credentials to access BigQuery and Cloud Storage. When this option is enabled, Dekart does not require a service account and <code>GOOGLE_APPLICATION_CREDENTIALS</code> to be set. The user token is retrieved from Google OAuth 2.0 flow and stored in only in the browser memory. When the page is refreshed, the token is retrieved again. User short-lived token is then passed via Authorization header Dekart backend to access BigQuery and Cloud Storage.</p><p>No token is stored in the Dekart backend, database, or logs.</p><p>Each user needs to have access to BigQuery and Cloud Storage with following permissions:</p><ul><li>BigQuery Data Viewer</li><li>BigQuery Job User</li><li>BigQuery Read Session User</li><li>Storage Object User</li></ul><p>This option is only supported for BigQuery and Cloud Storage. It is not supported for AWS and Snowflake Data Sources.</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_REQUIRE_GOOGLE_OAUTH</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.15</small></a></td><td>Enables Google OAuth 2.0 flow. Requires users to be authenticated.<br><em>Example value</em>: <code>1</code></td></tr><tr><td><code>DEKART_GOOGLE_OAUTH_CLIENT_ID</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.15</small></a></td><td>Google OAuth 2.0 Client ID.<br><em>Example value</em>: <code>1234567890-abcde.apps.googleusercontent.com</code></td></tr><tr><td><code>DEKART_GOOGLE_OAUTH_SECRET</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.15</small></a></td><td>Google OAuth 2.0 Client Secret.<br><em>Example value</em>: <code>******</code></td></tr></tbody></table><p>Creating Google OAuth 2.0 Client ID and Client Secret:</p><ol><li>Configure <a href=https://console.cloud.google.com/apis/credentials/consent>OAuth Consent Screen</a> in your Google Cloud Project</li><li>Create <a href=https://console.cloud.google.com/apis/credentials>OAuth 2.0 Client ID</a> with <code>Web application</code> type</li><li>Add <code>https://your-dekart-url.com/api/v1/authenticate</code> to <code>Authorized redirect URIs</code></li></ol><h2 id=-user-authorization-via-google-iap>üëë User authorization via Google IAP<a href=#-user-authorization-via-google-iap class=anchor aria-hidden=true>#</a></h2><div class="dekart-cta-banner-premium p-3 mb-3" style=zgotmplz><div class="row justify-content-between align-items-center"><div class="col-md-10 text-sm-center text-md-left">Dekart Premium feature</div><div class="col-md-6 text-md-right"><a class="btn btn-outline-dark" href=/self-hosted role=button>View Plans</a></div></div></div><p>Dekart can read <a target=_blank href=https://cloud.google.com/iap/docs/signed-headers-howto>claims provided by Google IAP</a> and authorize users to:</p><ul><li>list and edit only their own reports</li><li>read-only access to other users reports</li></ul><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_REQUIRE_IAP</code><br><a href=/self-hosted/><small class="badge badge-primary">premium</small></a></td><td>Enables validation Google IAP JWT. Required users to be authenticated. ENables user management policies.<br><em>Example value</em>: <code>1</code></td></tr><tr><td><code>DEKART_IAP_JWT_AUD</code><br><a href=/self-hosted/><small class="badge badge-primary">premium</small></a></td><td>Signed Header JWT Audience (<code>aud</code>). You can get the values for the aud string mentioned above by accessing the Cloud Console, or you can use the gcloud command-line tool. <a href=https://cloud.google.com/iap/docs/signed-headers-howto#verifying_the_jwt_payload>See details</a>.<br><em>Example value</em>: <code>/projects/PROJECT_NUMBER/apps/PROJECT_ID</code></td></tr></tbody></table><h2 id=-user-authorization-via-amazon-load-balancer>üëë User authorization via Amazon Load Balancer<a href=#-user-authorization-via-amazon-load-balancer class=anchor aria-hidden=true>#</a></h2><div class="dekart-cta-banner-premium p-3 mb-3" style=zgotmplz><div class="row justify-content-between align-items-center"><div class="col-md-10 text-sm-center text-md-left">Dekart Premium feature</div><div class="col-md-6 text-md-right"><a class="btn btn-outline-dark" href=/self-hosted role=button>View Plans</a></div></div></div><p>Dekart can read <a target=_blank href=https://docs.aws.amazon.com/elasticloadbalancing/latest/application/listener-authenticate-users.html>claims provided by Amazon Load Balancer</a> and authorize users to:</p><ul><li>list and edit only their reports</li><li>read-only access to other user&rsquo;s reports</li></ul><p><a href=/docs/self-hosting/aws-ecs-terraform/#cognito-authentication>Amazon Load Balancer configuration example with Terraform</a></p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_REQUIRE_AMAZON_OIDC</code><br><a href=/self-hosted/><small class="badge badge-primary">premium</small></a></td><td>Enables users authorization. Requires users to be authenticated and <code>x-amzn-oidc-data</code> to be passed from Load Balancer. Requires <code>AWS_REGION</code>.<br><em>Example value</em>: <code>1</code></td></tr></tbody></table><h2 id=-workspaces>üëë Workspaces<a href=#-workspaces class=anchor aria-hidden=true>#</a></h2><div class="dekart-cta-banner-premium p-3 mb-3" style=zgotmplz><div class="row justify-content-between align-items-center"><div class="col-md-10 text-sm-center text-md-left">Dekart Premium feature</div><div class="col-md-6 text-md-right"><a class="btn btn-outline-dark" href=/self-hosted role=button>View Plans</a></div></div></div><p>Dekart supports multiple workspaces. Each workspace can have its own set of reports, queries, and users. By default, all users are added to the <code>Default</code> workspace. To configure workspace management, set the following environment variables:</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_ALLOW_WORKSPACE_CREATION</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.18</small></a></td><td>When set to <code>1</code>, users can create new workspaces. Set to empty, new users will be automatically added to the <code>Default</code> workspace.<br><em>Example value</em>: <code>1</code></td></tr><tr><td><code>DEKART_DEFAULT_WORKSPACE_ADMIN</code><br><a href=/self-hosted/><small class="badge badge-primary">premium >= 0.18</small></a></td><td>Email that designates a default admin for the <code>Default</code> workspace. When not provided, all new users will be Admin. When provided, all users will be viewers, unless specified differently with <code>DEKART_DEFAULT_WORKSPACE_ROLE</code>.<br><em>Example value</em>: <code>admin@email.com</code></td></tr><tr><td><code>DEKART_DEFAULT_WORKSPACE_ROLE</code><br><a href=/self-hosted/><small class="badge badge-grey">premium >= 0.18</small></a></td><td>Role assigned by default to new users (e.g., <code>viewer</code>, <code>editor</code>, <code>admin</code>). Requires <code>DEKART_DEFAULT_WORKSPACE_ADMIN</code> to be specified.<br><em>Example value</em>: <code>viewer</code></td></tr></tbody></table><h2 id=user-experience>User Experience<a href=#user-experience class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_UX_HOMEPAGE</code></td><td>Change URL linked from Dekart logo<br><em>Default value</em>: <code>/</code></td></tr><tr><td><code>DEKART_UX_DATA_DOCUMENTATION</code></td><td>Allows provide URL to dataset documentation. It will appear in Dekart UI.<br><em>Example value</em>: <code>https://my.company/dataset/schema.html</code></td></tr><tr><td><code>DEKART_HTML_CUSTOM_CODE</code></td><td>Allows to add custom HTML code to <code>&lt;head></code>. Can be used for adding trackers.</td></tr><tr><td><code>DEKART_DISABLE_USAGE_STATS</code><br><small class="badge badge-info">version >= 0.11</small></td><td>By default, Dekart appends certain information to the referrer of external links. This information includes the version number, the SHA256 hash of the hostname, the name of the data source, and the total number of reports, queries, files, and authors. No other information is collected. The source code for this implementation can be found <a href=https://github.com/dekart-xyz/dekart/blob/main/src/client/lib/ref.js#L25>here</a>. This behavior can be turned off by setting this variable to <code>1</code>.</td></tr><tr><td><code>DEKART_UX_ACCESS_ERROR_INFO_HTML</code><br><small class="badge badge-info">version >= 0.16</small></td><td>Allows to provide custom HTML code to be shown on the access error page.</td></tr><tr><td><code>DEKART_UX_NOT_FOUND_ERROR_INFO_HTML</code><br><small class="badge badge-info">version >= 0.16</small></td><td>Allows to provide custom HTML code to be shown on the not found error page.</td></tr><tr><td><code>DEKART_UX_SAMPLE_QUERY_SQL</code><br><small class="badge badge-info">version >= 0.16</small></td><td>Allows to provide a sample SQL query to be shown in the query editor.</td></tr></tbody></table><h2 id=development-specific>Development specific<a href=#development-specific class=anchor aria-hidden=true>#</a></h2><p>Do not change for production</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>DEKART_LOG_DEBUG</code></td><td>Set Dekart log level to debug<br><em>Example value</em>: <code>1</code></td></tr><tr><td><code>DEKART_LOG_PRETTY</code></td><td>Print pretty colorful logs in console. By default Dekart formats logs as JSON<br><em>Example value</em>: <code>1</code></td></tr><tr><td><code>DEKART_STATIC_FILES</code></td><td><em>Example value</em>: <code>./build</code></td></tr><tr><td><code>DEKART_DEV_QUERY_CACHE_DEADLINE</code><br><small class="badge badge-info">version >= 0.18</small></td><td>Set the cache deadline for queries in development mode. This is useful when debug BigQuery or Snowflake cache expiration<br><em>Example</em>: <code>1m</code></td></tr></tbody></table><p class=edit-page><a href=https://github.com/dekart-xyz/www/blob/main/content/docs/configuration/environment-variables.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=https://dekart.xyz/docs/snowflake-snowpark/about/><div class="card my-1"><div class="card-body py-2">&larr; Dekart Snowpark Application</div></div></a><a class=ml-auto href=https://dekart.xyz/docs/usage/google-cloud-grant-scopes-faq/><div class="card my-1"><div class="card-body py-2">Google Cloud Grant Scopes &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=col-16><ul class=list-inline><li class=list-inline-item><a href=/legal/>Legal</a></li><li class=list-inline-item><a href=/docs/about/overture-maps-examples/>Overture Maps Examples</a></li><li class=list-inline-item><a href=/docs/about/kepler-gl-map-examples/>Kepler.gl Maps Examples</a></li><li class=list-inline-item><a href=/carto/>CARTO Alternative</a></li><li class=list-inline-item><a href=/blog/>Blog</a></li></ul></div></div></footer><script src=https://dekart.xyz/main.6aedabf29b1e9276b2cecddc8ad7aa10bc927a3bee04aa5d5671088a8af6a2a939fd5e8c8a1de6ffc40607e5478a5e47644959bd7fad3807ef443d60ee5d8263.js integrity="sha512-au2r8pseknayzs3citeqELySejvuBKpdVnEIior2oqk5/V6Mih3m/8QGB+VHil5HZElZvX+tOAfvRD1g7l2CYw==" crossorigin=anonymous defer></script>
<script src=https://dekart.xyz/index.min.e58ed1d59ec2f0038767f11e66fef942e956737bf2ebe037327179787457234bbc82ef4bb905d9360547e2cd4801a031f64013bad23488ea0e47dbf5157895d3.js integrity="sha512-5Y7R1Z7C8AOHZ/EeZv75QulWc3vy6+A3MnF5eHRXI0u8gu9LuQXZNgVH4s1IAaAx9kATutI0iOoOR9v1FXiV0w==" crossorigin=anonymous defer></script></body></html>